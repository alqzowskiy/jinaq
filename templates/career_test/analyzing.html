{% extends "base.html" %}
{% block content %}
<div class="bg-white min-h-screen py-12" id="analysis-container"
    data-results-url="{{ url_for('career_test_results') }}">
    <div class="container mx-auto px-4">
        <div class="max-w-3xl mx-auto text-center">
            <h1 class="text-3xl md:text-4xl font-bold mb-8 text-black">–ê–Ω–∞–ª–∏–∑ –≤–∞—à–∏—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç–µ–π</h1>

            <div class="bg-white border border-gray-200 rounded-xl shadow-md p-8 mb-12">
                <!-- –í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –∞–Ω–∞–ª–∏–∑–∞ -->
                <div class="flex justify-center mb-10">
                    <div class="relative w-32 h-32">
                        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è - –∫—Ä—É–≥ —Å –≤—Ä–∞—â–µ–Ω–∏–µ–º -->
                        <div class="absolute inset-0 border-t-2 border-black rounded-full animate-spin"></div>
                        <div class="absolute inset-0 border-t-2 border-l-2 border-gray-400 rounded-full"
                            style="animation: spin 4s linear infinite; animation-delay: -1s"></div>
                        <div class="absolute inset-0 border-r-2 border-b-2 border-gray-300 rounded-full"
                            style="animation: spin 3s linear infinite; animation-delay: -2s"></div>

                        <!-- –ò–∫–æ–Ω–∫–∞ –º–æ–∑–≥–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ (SVG) -->
                        <div class="absolute inset-0 flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-black" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- –°—Ç–∞—Ç—É—Å –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
                <div id="analysis-status" class="mb-6">
                    <h2 class="text-xl font-bold mb-3 text-black">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞—à –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                    <p class="text-gray-600 mb-2" id="current-action">–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>

                    <div class="w-full bg-gray-200 rounded-full h-2.5 overflow-hidden mb-6">
                        <div id="progress-bar" class="bg-black h-2.5 rounded-full transition-all duration-300"
                            style="width: 5%"></div>
                    </div>
                </div>

                <!-- –ö–∞—Ä—É—Å–µ–ª—å –¥–ª—è –∏–Ω—Å–∞–π—Ç–æ–≤ -->
                <div id="insights-carousel" class="hidden mb-6 overflow-hidden relative">
                    <div class="insights-container transition-all duration-700 flex">
                        <div
                            class="insight-slide w-full p-4 bg-gray-50 rounded-lg border border-gray-200 mb-4 text-left">
                            <h3 class="font-semibold text-black">üí° –í–∞—à –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–∏–ø</h3>
                            <p class="text-gray-700">–°–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Å—Ç—É –ì–æ–ª–ª–∞–Ω–¥–∞, –≤–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∏–ø - <span
                                    class="font-semibold">–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π-–ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å–∫–∏–π</span>. –í–∞–º –ø–æ–¥—Ö–æ–¥—è—Ç
                                –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑ –∏ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∑–∞–¥–∞—á.</p>
                        </div>
                        <div
                            class="insight-slide w-full p-4 bg-gray-50 rounded-lg border border-gray-200 mb-4 text-left">
                            <h3 class="font-semibold text-black">üîç –ö–ª—é—á–µ–≤—ã–µ –º–æ—Ç–∏–≤–∞—Ç–æ—Ä—ã</h3>
                            <p class="text-gray-700">–î–ª—è –≤–∞—Å –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω—ã <span class="font-semibold">–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å,
                                    –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω–Ω–æ–≤–∞—Ü–∏–π</span>. –≠—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç–∏ –∫
                                —Ç–≤–æ—Ä—á–µ—Å–∫–∏–º –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º.</p>
                        </div>
                        <div
                            class="insight-slide w-full p-4 bg-gray-50 rounded-lg border border-gray-200 mb-4 text-left">
                            <h3 class="font-semibold text-black">‚ú® –í–∞—à–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã</h3>
                            <p class="text-gray-700">–ê–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–≤–∏—Ç–æ–µ <span
                                    class="font-semibold">–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö –∏
                                    —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>. –≠—Ç–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ü–µ–Ω—è—Ç—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö —Å—Ñ–µ—Ä–∞—Ö.</p>
                        </div>
                        <div
                            class="insight-slide w-full p-4 bg-gray-50 rounded-lg border border-gray-200 mb-4 text-left">
                            <h3 class="font-semibold text-black">üìà –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–∞—è —Å—Ñ–µ—Ä–∞</h3>
                            <p class="text-gray-700">–ù–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤, <span class="font-semibold">—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏,
                                    –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –±–∏–∑–Ω–µ—Å</span> - —Å—Ñ–µ—Ä—ã, –≥–¥–µ –≤–∞—à–∏ —Ç–∞–ª–∞–Ω—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–∞–∏–±–æ–ª–µ–µ
                                –ø–æ–ª–Ω–æ –∏ —Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é —É—Å–ø–µ—Ö–∞.</p>
                        </div>
                    </div>
                    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∫–∞—Ä—É—Å–µ–ª–∏ -->
                    <div class="flex justify-center mt-2">
                        <div class="insight-indicator w-2 h-2 rounded-full bg-black mx-1"></div>
                        <div class="insight-indicator w-2 h-2 rounded-full bg-gray-300 mx-1"></div>
                        <div class="insight-indicator w-2 h-2 rounded-full bg-gray-300 mx-1"></div>
                        <div class="insight-indicator w-2 h-2 rounded-full bg-gray-300 mx-1"></div>
                    </div>
                </div>

                <!-- –®–∞–≥–∏ –∞–Ω–∞–ª–∏–∑–∞ -->
                <div id="analysis-steps" class="text-left space-y-4 mb-10">
                    <div class="flex items-center" id="step1">
                        <div
                            class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center mr-3 step-indicator">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 check-icon hidden"
                                viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd" />
                            </svg>
                            <div class="spinner hidden">
                                <div
                                    class="w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin">
                                </div>
                            </div>
                            <span class="text-gray-500 step-number">1</span>
                        </div>
                        <div class="flex-1">
                            <span class="text-gray-500 font-medium">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç</span>
                            <p class="text-sm text-gray-400 detail-text hidden">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞—à–∏ –±–∞–∑–æ–≤—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏
                                –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Ä–∞–±–æ—Ç–µ</p>
                        </div>
                    </div>

                    <div class="flex items-center" id="step2">
                        <div
                            class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center mr-3 step-indicator">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 check-icon hidden"
                                viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd" />
                            </svg>
                            <div class="spinner hidden">
                                <div
                                    class="w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin">
                                </div>
                            </div>
                            <span class="text-gray-500 step-number">2</span>
                        </div>
                        <div class="flex-1">
                            <span class="text-gray-500 font-medium">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –ª–∏—á–Ω–æ—Å—Ç–∏
                                (RIASEC)</span>
                            <p class="text-sm text-gray-400 detail-text hidden">–í—ã—è–≤–ª—è–µ–º –≤–∞—à —Ç–∏–ø –ø–æ –º–µ—Ç–æ–¥–∏–∫–µ –ì–æ–ª–ª–∞–Ω–¥–∞: R
                                (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π), I (–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π), A (–∞—Ä—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π), S (—Å–æ—Ü–∏–∞–ª—å–Ω—ã–π), E
                                (–ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å–∫–∏–π), C (–∫–æ–Ω–≤–µ–Ω—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)</p>
                        </div>
                    </div>

                    <div class="flex items-center" id="step3">
                        <div
                            class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center mr-3 step-indicator">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 check-icon hidden"
                                viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd" />
                            </svg>
                            <div class="spinner hidden">
                                <div
                                    class="w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin">
                                </div>
                            </div>
                            <span class="text-gray-500 step-number">3</span>
                        </div>
                        <div class="flex-1">
                            <span class="text-gray-500 font-medium">–ê–Ω–∞–ª–∏–∑ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è</span>
                            <p class="text-sm text-gray-400 detail-text hidden">–í—ã—è–≤–ª—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ
                                –º–æ—Ç–∏–≤–∏—Ä—É—é—Ç –≤–∞—Å –≤ —Ä–∞–±–æ—Ç–µ: –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ, –∏–Ω—Ç–µ—Ä–µ—Å, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –¥–æ—Ö–æ–¥</p>
                        </div>
                    </div>

                    <div class="flex items-center" id="step4">
                        <div
                            class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center mr-3 step-indicator">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 check-icon hidden"
                                viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd" />
                            </svg>
                            <div class="spinner hidden">
                                <div
                                    class="w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin">
                                </div>
                            </div>
                            <span class="text-gray-500 step-number">4</span>
                        </div>
                        <div class="flex-1">
                            <span class="text-gray-500 font-medium">–ö–∞—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –∏ –ø—Ä–∏—Ä–æ–¥–Ω—ã—Ö
                                —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç–µ–π</span>
                            <p class="text-sm text-gray-400 detail-text hidden">–°–æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç—É –≤–∞—à–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –∏
                                –≤—ã—è–≤–ª—è–µ–º —Ç–∞–ª–∞–Ω—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç–æ–∏—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è</p>
                        </div>
                    </div>

                    <div class="flex items-center" id="step5">
                        <div
                            class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center mr-3 step-indicator">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 check-icon hidden"
                                viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd" />
                            </svg>
                            <div class="spinner hidden">
                                <div
                                    class="w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin">
                                </div>
                            </div>
                            <span class="text-gray-500 step-number">5</span>
                        </div>
                        <div class="flex-1">
                            <span class="text-gray-500 font-medium">–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö
                                –ø—Ä–æ—Ñ–µ—Å—Å–∏–π</span>
                            <p class="text-sm text-gray-400 detail-text hidden">–°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏
                                —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ —Ä—ã–Ω–∫–∞ —Ç—Ä—É–¥–∞ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö –æ—Ç—Ä–∞—Å–ª—è—Ö</p>
                        </div>
                    </div>

                    <div class="flex items-center" id="step6">
                        <div
                            class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center mr-3 step-indicator">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 check-icon hidden"
                                viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd" />
                            </svg>
                            <div class="spinner hidden">
                                <div
                                    class="w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin">
                                </div>
                            </div>
                            <span class="text-gray-500 step-number">6</span>
                        </div>
                        <div class="flex-1">
                            <span class="text-gray-500 font-medium">–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</span>
                            <p class="text-sm text-gray-400 detail-text hidden">–ü–æ–¥–±–∏—Ä–∞–µ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏
                                —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö</p>
                        </div>
                    </div>
                </div>

                <!-- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ) -->
                <div id="profile-visualization"
                    class="hidden mb-6 bg-white border border-gray-200 rounded-lg p-4 max-w-md mx-auto">
                    <h3 class="font-semibold text-center mb-2">–í–∞—à –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å</h3>
                    <div class="flex mb-3 flex-wrap justify-center gap-2">
                        <span class="bg-black text-white px-2 py-1 rounded text-sm font-medium">–ê–Ω–∞–ª–∏—Ç–∏–∫</span>
                        <span class="bg-black text-white px-2 py-1 rounded text-sm font-medium">–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å</span>
                        <span class="bg-black text-white px-2 py-1 rounded text-sm font-medium">–°—Ç—Ä–∞—Ç–µ–≥</span>
                        <span class="bg-black text-white px-2 py-1 rounded text-sm font-medium">–ù–æ–≤–∞—Ç–æ—Ä</span>
                    </div>
                    <div class="space-y-2">
                        <div class="relative pt-1">
                            <div class="flex mb-1 items-center justify-between">
                                <div>
                                    <span class="text-xs font-semibold inline-block text-black">–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ
                                        –º—ã—à–ª–µ–Ω–∏–µ</span>
                                </div>
                                <div>
                                    <span class="text-xs font-semibold inline-block text-black">85%</span>
                                </div>
                            </div>
                            <div class="overflow-hidden h-2 text-xs flex rounded bg-gray-200">
                                <div style="width: 85%"
                                    class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-black">
                                </div>
                            </div>
                        </div>
                        <div class="relative pt-1">
                            <div class="flex mb-1 items-center justify-between">
                                <div>
                                    <span class="text-xs font-semibold inline-block text-black">–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ–µ
                                        –º—ã—à–ª–µ–Ω–∏–µ</span>
                                </div>
                                <div>
                                    <span class="text-xs font-semibold inline-block text-black">75%</span>
                                </div>
                            </div>
                            <div class="overflow-hidden h-2 text-xs flex rounded bg-gray-200">
                                <div style="width: 75%"
                                    class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-black">
                                </div>
                            </div>
                        </div>
                        <div class="relative pt-1">
                            <div class="flex mb-1 items-center justify-between">
                                <div>
                                    <span class="text-xs font-semibold inline-block text-black">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</span>
                                </div>
                                <div>
                                    <span class="text-xs font-semibold inline-block text-black">65%</span>
                                </div>
                            </div>
                            <div class="overflow-hidden h-2 text-xs flex rounded bg-gray-200">
                                <div style="width: 65%"
                                    class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-black">
                                </div>
                            </div>
                        </div>
                        <div class="relative pt-1">
                            <div class="flex mb-1 items-center justify-between">
                                <div>
                                    <span class="text-xs font-semibold inline-block text-black">–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è</span>
                                </div>
                                <div>
                                    <span class="text-xs font-semibold inline-block text-black">70%</span>
                                </div>
                            </div>
                            <div class="overflow-hidden h-2 text-xs flex rounded bg-gray-200">
                                <div style="width: 70%"
                                    class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-black">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ -->
                <div id="analysis-info" class="mb-8 hidden">
                    <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <h3 class="font-semibold text-black mb-2">–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω</h3>
                        <p class="text-gray-600">–ù–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤–∞—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ –º—ã –ø–æ–¥–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å
                            –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏ –∫–∞—Ä—å–µ—Ä–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –°–µ–π—á–∞—Å –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å
                            —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const progressBar = document.getElementById('progress-bar');
        const currentAction = document.getElementById('current-action');
        const analysisInfo = document.getElementById('analysis-info');
        const insightsCarousel = document.getElementById('insights-carousel');
        const profileVisualization = document.getElementById('profile-visualization');
        const steps = ['step1', 'step2', 'step3', 'step4', 'step5', 'step6'];

        // URL –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
        const resultsUrl = document.getElementById('analysis-container').dataset.resultsUrl || '/career-test/results';

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Å–∞–π—Ç–∞–º–∏
        let currentInsight = 0;
        let insightSlides = null;
        let insightIndicators = null;
        let insightInterval = null;

        // Function to update step status
        function updateStepStatus(stepId, status) {
            const step = document.getElementById(stepId);
            const indicator = step.querySelector('.step-indicator');
            const spinner = step.querySelector('.spinner');
            const checkIcon = step.querySelector('.check-icon');
            const stepNumber = step.querySelector('.step-number');
            const detailText = step.querySelector('.detail-text');

            if (status === 'pending') {
                indicator.classList.add('bg-gray-100');
                indicator.classList.remove('bg-black');
                spinner.classList.add('hidden');
                checkIcon.classList.add('hidden');
                stepNumber.classList.remove('hidden');
                step.querySelector('span:not(.step-number)').classList.add('text-gray-500');
                step.querySelector('span:not(.step-number)').classList.remove('text-black');
                if (detailText) detailText.classList.add('hidden');
            } else if (status === 'processing') {
                indicator.classList.add('bg-black');
                indicator.classList.remove('bg-gray-100');
                spinner.classList.remove('hidden');
                checkIcon.classList.add('hidden');
                stepNumber.classList.add('hidden');
                step.querySelector('span:not(.step-number)').classList.remove('text-gray-500');
                step.querySelector('span:not(.step-number)').classList.add('text-black');
                if (detailText) detailText.classList.remove('hidden');
            } else if (status === 'completed') {
                indicator.classList.add('bg-black');
                indicator.classList.remove('bg-gray-100');
                spinner.classList.add('hidden');
                checkIcon.classList.remove('hidden');
                checkIcon.classList.add('text-white');
                stepNumber.classList.add('hidden');
                step.querySelector('span:not(.step-number)').classList.remove('text-gray-500');
                step.querySelector('span:not(.step-number)').classList.add('text-black');
                if (detailText) detailText.classList.add('hidden');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Å–∞–π—Ç–æ–≤
        function updateInsights() {
            if (!insightSlides) return;

            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–ª–∞–π–¥—ã
            for (let i = 0; i < insightSlides.length; i++) {
                insightSlides[i].style.transform = `translateX(-${currentInsight * 100}%)`;
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
            for (let i = 0; i < insightIndicators.length; i++) {
                if (i === currentInsight) {
                    insightIndicators[i].classList.add('bg-black');
                    insightIndicators[i].classList.remove('bg-gray-300');
                } else {
                    insightIndicators[i].classList.remove('bg-black');
                    insightIndicators[i].classList.add('bg-gray-300');
                }
            }

            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
            currentInsight = (currentInsight + 1) % insightSlides.length;
        }

        // Simulated analysis process
        async function simulateAnalysis() {
            // Initialize steps
            steps.forEach(step => updateStepStatus(step, 'pending'));

            // Step 1: Loading and analyzing basic preferences
            updateStepStatus('step1', 'processing');
            currentAction.textContent = '–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞–∑–æ–≤—ã—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π...';
            progressBar.style.width = '15%';
            await new Promise(resolve => setTimeout(resolve, 2000));
            updateStepStatus('step1', 'completed');

            // Step 2: Determining personality type
            updateStepStatus('step2', 'processing');
            currentAction.textContent = '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –ª–∏—á–Ω–æ—Å—Ç–∏...';
            progressBar.style.width = '30%';
            await new Promise(resolve => setTimeout(resolve, 2500));
            updateStepStatus('step2', 'completed');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å–∞–π—Ç—ã –ø–æ—Å–ª–µ 2 —ç—Ç–∞–ø–∞
            insightsCarousel.classList.remove('hidden');
            insightSlides = document.querySelectorAll('.insight-slide');
            insightIndicators = document.querySelectorAll('.insight-indicator');
            insightInterval = setInterval(updateInsights, 4000);

            // Step 3: Analyzing motivation factors
            updateStepStatus('step3', 'processing');
            currentAction.textContent = '–ê–Ω–∞–ª–∏–∑ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤...';
            progressBar.style.width = '45%';
            await new Promise(resolve => setTimeout(resolve, 2000));
            updateStepStatus('step3', 'completed');

            // Step 4: Determining interests and aptitudes
            updateStepStatus('step4', 'processing');
            currentAction.textContent = '–ö–∞—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤...';
            progressBar.style.width = '60%';
            await new Promise(resolve => setTimeout(resolve, 2500));
            updateStepStatus('step4', 'completed');

            // Step 5: Matching with profession requirements
            updateStepStatus('step5', 'processing');
            currentAction.textContent = '–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π...';
            progressBar.style.width = '75%';
            await new Promise(resolve => setTimeout(resolve, 3000));
            updateStepStatus('step5', 'completed');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ—Ñ–∏–ª—è –ø–æ—Å–ª–µ 5 —ç—Ç–∞–ø–∞
            profileVisualization.classList.remove('hidden');

            // Step 6: Final calculation
            updateStepStatus('step6', 'processing');
            currentAction.textContent = '–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π...';
            progressBar.style.width = '90%';
            await new Promise(resolve => setTimeout(resolve, 2500));
            updateStepStatus('step6', 'completed');

            // Fetch actual results
            currentAction.textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö...';
            progressBar.style.width = '100%';

            // Actually generate the results in the background
            try {
                const response = await fetch('/career-test/generate-results', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });

                if (!response.ok) {
                    console.error('Error status:', response.status);
                }
            } catch (error) {
                console.error('Error generating results:', error);
            }

            // Completion
            clearInterval(insightInterval); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–º–µ–Ω—É –∏–Ω—Å–∞–π—Ç–æ–≤
            await new Promise(resolve => setTimeout(resolve, 1500));
            document.querySelector('#analysis-status h2').textContent = '–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω';
            currentAction.textContent = '–í–∞—à–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤—ã';

            // Show completion info and begin redirect countdown
            analysisInfo.classList.remove('hidden');

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            await new Promise(resolve => setTimeout(resolve, 3000));
            window.location.href = resultsUrl;
        }

        // Start the simulation
        simulateAnalysis();
    });
</script>

<style>
    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }
</style>
{% endblock %}